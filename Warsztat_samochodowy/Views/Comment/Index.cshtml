@model List<Warsztat_samochodowy.Models.CommentModel>

@{
    ViewData["Title"] = "Komentarze";
}

<h2>Komentarze do: @ViewBag.OrderTitle</h2>

<a asp-controller="ServiceOrder" asp-action="Details" asp-route-id="@ViewBag.OrderId" class="btn btn-link">← Wróć do szczegółów</a>

<ul class="list-group mb-4">
    @foreach (var comment in Model)
    {
        <li class="list-group-item">
            <strong>@comment.Author</strong> <small>@comment.Timestamp.ToLocalTime()</small>
            <p>@comment.Content</p>
            <form asp-controller="Comment" asp-action="Delete" method="post" class="mt-2">
                <input type="hidden" name="id" value="@comment.Id" />
                <button type="submit" class="btn btn-sm btn-danger">Usuń</button>
            </form>
        </li>
    }
</ul>

<h4>Dodaj komentarz</h4>
<form asp-action="Create" method="post">
    <input type="hidden" name="ServiceOrderId" value="@ViewBag.OrderId" />
    <div class="form-group">
        <label>Autor</label>
        <input name="Author" class="form-control" required />
    </div>
    <div class="form-group">
        <label>Treść</label>
        <textarea name="Content" class="form-control" maxlength="1000" required></textarea>
    </div>
    <button type="submit" class="btn btn-primary mt-2">Dodaj komentarz</button>
</form>
